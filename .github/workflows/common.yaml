name: Common
on:
  push

jobs:
  # TODO - only master
  snyk:
    runs-on: ubuntu-latest
    name: "Snyk monitor"
    steps:
      - name: Set up Elixir
        uses: erlef/setup-beam@v1
        with:
          otp-version: 25
          elixir-version: 1.14.3

      - name: Install Snyk CLI
        uses: snyk/actions/setup@master

      - name: Checkout code
        uses: actions/checkout@v3

      - name: Snyk monitor
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        run: snyk monitor -d --org=yordaniliev2002 --all-projects
